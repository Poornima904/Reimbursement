sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast"],function(e,t){"use strict";var a;var r=true;var n=true;return e.extend("app1.ext.controller.ObjectC",{override:{onInit:function(e){var t=this.base.getExtensionAPI().getModel();a=t;var r=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::ObjectPage");r.attachSectionChange(function(e){if(e.getSource().getSelectedSection()=="app1::reimbursementheaderObjectPage--fe::CustomSection::Frag1"){let e=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet");e.setUploadButtonInvisible(false)}var t=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(true);t[e].setVisibleEdit(true)}})},routing:{onBeforeBinding:async function(e){debugger;if(r){var t="load";var a="reimburseDetails";let e=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::Form::GeneratedFacet1::Content").getModel().bindContext(`/${t}(...)`);e.setParameter("casee",a);await e.execute();r=false}},onAfterBinding:async function(){debugger;let e=this.base.getView().mAggregations.content[0].mAggregations.sections[2].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[0];e.setMode("None");var t=window.location.href;var a=/reimbursmentId='(\d+)'/;var r=t.match(a);var n=r[1];let o=JSON.stringify({key:n,status:"getWorkflowdata"});var i=this.base.getView().getContent()[0].getSections()[2].mAggregations._grid.getContent()[0].mAggregations._grid.getContent()[0].getContent().getItems()[0].mBindingInfos.items.binding;i.filter(new sap.ui.model.Filter({path:"reimbursmentId",operator:sap.ui.model.FilterOperator.EQ,value1:n}));var s=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Workflow--table").mBindingInfos.items.binding;s.filter(new sap.ui.model.Filter({path:"reimbursmentId",operator:sap.ui.model.FilterOperator.EQ,value1:n}));sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Workflow--table").mBindingInfos.items.binding.refresh()}},editFlow:{beforeNavigationTo:function(){},onBeforeSave:async function(e){debugger;let a=new sap.m.Dialog({title:"Confirmation",type:"Message",content:new sap.m.Text({text:"Are you sure want to submit the form?"}),beginButton:new sap.m.Button({type:"Accept",text:"Yes",press:async function(e,r){sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::StandardAction::Edit").setEnabled(false);sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::StandardAction::Edit").setVisible(false);sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Comments--text1").setValue("");t.show("Submitted successfully for Approval");var n=window.location.href;var o=/reimbursmentId='(\d+)'/;var i=n.match(o);var s=i[1];var g="asdf";let m=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::Form::GeneratedFacet1::Content").getModel().bindContext(`/${g}(...)`);m.setParameter("id",s);await m.execute();window.location.reload();a.close();window.history.back()}}),endButton:new sap.m.Button({type:"Reject",text:"Cancel",press:function(){sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::StandardAction::Edit").setEnabled(true);sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::StandardAction::Edit").setVisible(true);sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Comments--text1").setValue("");a.close()}}),afterClose:function(){a.destroy()}});console.log("testetsste");var r=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Comments--text1").mProperties.value;var n=e.context.sPath;var o=/reimbursmentId='(\d+)'/;var i=n.match(o);const s=i[1];var g="commentfi";let m=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::Form::GeneratedFacet1::Content").getModel().bindContext(`/${g}(...)`);m.setParameter("id",s);m.setParameter("comment",r);await m.execute();debugger;var d="itemvalidate";let u=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::Form::GeneratedFacet1::Content").getModel().bindContext(`/${d}(...)`);u.setParameter("reiddd",s);await u.execute();console.log("func completed");let b=u.getBoundContext();let l=b.getValue();let c=l.value;c=JSON.parse(c);for(var p=0;p<c.length;p++){let e=parseFloat(c[p].amountToBeReimbursed);let t=parseFloat(c[p].amountEligibleToClaim);if(e){a.open()}}},onAfterSave:async function(e){sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").setUploadButtonInvisible(true);var t=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(false);t[e].setVisibleEdit(false)}var a=window.location.href;var r=/reimbursmentId='(\d+)'/;var o=a.match(r);var i=o[1];var s=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::FormContainer::GeneratedFacet1::FormElement::DataField::status::Field-display").mProperties.text;if(n){var g="afterload";let e=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::Form::GeneratedFacet1::Content").getModel().bindContext(`/${g}(...)`);e.setParameter("paramid",i);await e.execute();n=false}},onAfterDiscard:function(){let e=this.base.getView().mAggregations.content[0].mAggregations.sections[2].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[0];e.setMode("None");sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").setUploadButtonInvisible(true);var t=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(false);t[e].setVisibleEdit(false)}},onAfterEdit:function(e){let t=this.base.getView().mAggregations.content[0].mAggregations.sections[2].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[0];t.setMode("MultiSelect");var a=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").getItems();for(let e=0;e<a.length;e++){a[e].setVisibleRemove(true);a[e].setVisibleEdit(true)}sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").setUploadButtonInvisible(false)},onAfterCreate:function(){let e=this.base.getView().mAggregations.content[0].mAggregations.sections[2].mAggregations._grid.mAggregations.content[0].mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.items[0];e.setMode("MultiSelect");var t=sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").getItems();for(let e=0;e<t.length;e++){t[e].setVisibleRemove(true);t[e].setVisibleEdit(true)}sap.ui.getCore().byId("app1::reimbursementheaderObjectPage--fe::CustomSubSection::Frag1--uploadSet").setUploadButtonInvisible(false)}}}})});